query DraftTableOfContents($slug: String!) {
  projectBySlug(slug: $slug) {
    id
    draftTableOfContentsItems {
      id
      dataLayerId
      title
      acl {
        type
      }
      isClickOffOnly
      isFolder
      stableId
      parentStableId
      showRadioChildren
      bounds
      sortIndex
    }
  }
}

query layersAndSourcesForItems(
  $slug: String!
  $tableOfContentsItemIds: [Int]!
) {
  projectBySlug(slug: $slug) {
    id
    dataSourcesForItems(tableOfContentsItemIds: $tableOfContentsItemIds) {
      attribution
      bounds
      bucketId
      buffer
      byteLength
      cluster
      clusterMaxZoom
      clusterProperties
      clusterRadius
      coordinates
      createdAt
      encoding
      enhancedSecurity
      id
      importType
      lineMetrics
      maxzoom
      minzoom
      objectKey
      originalSourceUrl
      queryParameters
      scheme
      tiles
      tileSize
      tolerance
      type
      url
      urls
      useDevicePixelRatio
    }
    dataLayersForItems(tableOfContentsItemIds: $tableOfContentsItemIds) {
      dataSourceId
      id
      mapboxGlStyles
      renderUnder
      sourceLayer
      sublayer
    }
  }
}

mutation CreateFolder(
  $title: String!
  $stableId: String!
  $projectId: Int!
  $parentStableId: String
) {
  createTableOfContentsItem(
    input: {
      tableOfContentsItem: {
        title: $title
        stableId: $stableId
        projectId: $projectId
        parentStableId: $parentStableId
        isFolder: true
      }
    }
  ) {
    tableOfContentsItem {
      id
      title
      stableId
      projectId
      parentStableId
      isClickOffOnly
      isDraft
      isFolder
      showRadioChildren
      isClickOffOnly
      sortIndex
    }
  }
}

mutation DeleteBranch($id: Int!) {
  deleteTableOfContentsBranch(input: {
    tableOfContentsItemId: $id
  }) {
    clientMutationId
  }
}

mutation UpdateTableOfContentsItemChildren($id: Int, $childIds: [Int]!) {
  updateTableOfContentsItemChildren(input: {
    parentId: $id
    childIds: $childIds
  }) {
    tableOfContentsItems {
      id
      sortIndex
      parentStableId
    }
  }
}
